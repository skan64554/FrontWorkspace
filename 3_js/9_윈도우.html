<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   <style>
  #clock {
    font-size : 3em;
    text-shadow : 3px 3px 7px #000;
  }
  #countdown {
    border: 3px solid #000;
    font-size : 30em;
    padding: 10px;
    text-align : center;
    display : none;
  }
  </style>
  </head>
<body>
    <h2>Method</h2>
  <input type="button" value="open" onclick="test1();">
  <input type="button" value="popup 닫기" onclick="test2();">
  <input type="button" value="setTimeout" onclick="test3();">
  <input type="button" value="실습문제" onclick="test4();">
  <input type="button" value="clearTimeout" onclick="test5();">
  <input type="button" value="setInterval" onclick="test6();">
  <input type="button" value="실습문제2" onclick="test7();">
  <hr>
  <div id="clock"></div>
  <div id="countdown"></div>

  <script>
    /*
        window : 웹 브라우저 상위 객체
         - 웹브라우저에 의해 탭마다 하나씩 생성되는 객체로
         브라우저를 제어할 수 있는 메서드를 제공한다.
         - 웹브라우저상의 최상위 객체로, javascript를 실행하는 
         환경에 따라 존재하지 않을 수 도 있다.

         동기메서드와 비동기메서드 차이 
         동기메서드 : 일반메서드

        open()
        - 새 창 열기 메서드
        - 새 탭으로 웹페이지를 열거나, 팝업창 형태로 웹 페이지를 열 수 있다
    */
   var newWindow;
   function test1(){
        // _self 지정시 현재 창에서 열기
        // 아무거나 고유한 이름으로 팝업으로 열림

        // 새로 생성된 window객체를 저장
        newWindow = open("8_함수.html",
            "crockle" , "width=800 , height = 500 , top = 300 , left = 300"
        )
        newWindow.alert("안녕하세요?")
   }

   function test2(){
        // 윈도우 닫는 메서드
        newWindow && newWindow.close();
   }

   function test3(){
        /*
            setTimeout(callback , millis)
             - 지정된 millis가 지나면 callback 함수를 실행
             - timeoutApi의 메서드중 하나로, timeoutApi는 비동기적으로 처리된다.
             - 비동기적으로 처리되는 메서드는 작업 완료를 기다리지 않는다.
        */
       setTimeout(function(){
            alert("반갑습니다");
       }, 3000);
       // 비동기함수이기 때문에 동기함수를 다 실행하고 마지막에 실행
       alert("안녕");
   }

   function test4(){
        
        var i = 1;
        console.log(1 , i++); // 1(2)
        test(i); // 2
        setTimeout(function(){ // 비동기함수 -> 마지막 실행
            console.log(2 , i++); // 2(3)
        }, 1000);
        console.log(3,i); // 2
   }

   function test(i){
        console.log(i--); // 2(1)
   }

       function test5(){
            // setTimeout호출시 고유한 id값을 반환
            var timeId = setTimeout(function(){
                console.log("10초 후 실행");
            },10000);
            
            // 비동기 x -> 즉시 실행
            console.log(timeId);
            clearTimeout(timeId);
        }

        /*
            setInterval(callback, millis)
             - millis초마다 callback 함수를 지속적으로 실행하는 함수
             - setTimeout과 같이 비동기 함수
             - 종료를 위해서는 clearInterval함수호출 
        */

        function test6(){
            // var num = 1;
            // setInterval(function(){
            //     console.log(num++);
            // },1000)

            setInterval(function(){
                var now = new Date();
                var strFormat = getTimeFormatStr(now);
                clock.innerHTML = strFormat;
            },1000);
        }

        /**
   * 00:00:00
   * @param {Date} param - description
   */
  function getTimeFormatStr(time){
    var f = function(n){
      return n >= 10 ? n : "0" + n;
    };
    var hh = f(time.getHours());
    var mi = f(time.getMinutes());
    var ss = f(time.getSeconds());
    return hh + ":" + mi + ":" + ss;
  }

        function test7(){
            /*
            실습문제
            버튼클릭시 카운트다운하는 함수 만들기
            10, 9 , 8, 7, 6, 5,... 1..
            0도달시 카운트다운 종료.
           */
          
            var num = 10;
            
            var timer = setInterval(function(){ 
                countdown.style.display = "block";
                countdown.innerHTML = num--;

                num == -1 && 
                (countdown.innerHTML = "종료!") && 
                clearInterval(timer);
                
            },400)
        }
  </script>

    <h2>BOM</h2>
  <h3>Browser Object Model</h3>
  <input type="button" value="navigator" onclick="test8();">
  <input type="button" value="location" onclick="test9();">
  <input type="button" value="history" onclick="test10();">
  <input type="button" value="screen" onclick="test11();">

  <script>
    function test8(){
        /*
            navigator
             - 현재 실행 중인 브라우저에 대한 정보를 가진 객체
             - 클라이언트의 브라우저 정보를 확인하여, 해당 브라우저에 맞는
             적합한 컨텐츠를 제공할 때 사용
        */
       console.log(navigator);
    }

    function test9(){
        //location
        /*
            location
             - 브라우저의 주소창과 관련된 정보를 가진 객체
             - 브라우저의 url에서 프로토콜, 호스트네임, 포트번호, 자원경로.
               쿼리스트링 등을 얻어 올 수 있다.
             - 브라우저의 url을 직접 조작하여 다른 페이지로 이동 가능
        */
       console.log(location);
       location.reload(); // 새로고침

       // 페이지 이동 메서드
       // location.assign("https://naver.com");
       // location.replace("http://naver.com"); 
       // replace는 히스토리가 없어 뒤로가기 불가능
       // location.href = "https://naver.com"; 비추
    }

    function test10(){
        /*
            history 
             - 웹페이지 방문기록과 관련된 정보를 가진 객체
             back() : 뒤로 가기
             forward() : 앞으로 가기
             go(n) : n번째 페이지로 이동하기
        */
       console.log(history);
       //history.back();
       history.forward();
    }

    function test11(){
        /*
            screen
             - 모니터와 관련된 정보를 가진 객체
        */
       console.log(screen);

       // 팝업을 사용자 화면의 정 가운데에 띄우기
       var w = 300;
       var h = 300;
       var left = (screen.availWidth - w ) / 2 
       + screen.availLeft;
       var top = (screen.availHeight - h) / 2 ;

       open("","popup","width="+w+",height="+h+","+
        "left="+left+",top="+top)
    }
  </script>

  <hr>
  <h2>DOM</h2>
  <input type="button" value="createElement" onclick="test12();">
  <input type="button" value="createImg" onclick="test13();">
  <input type="button" value="deleteNode" onclick="deleteNode(this);">
 

  <div class="img-wrapper"></div>
  <div class="result"></div>

  <script>
    /*
        Node객체
         - 모든 DOM객체는 Node객체를 상속받는다
         - html문서 내부에 작성하는 주석, 문자열, 태그는 모두 Node로 처리
         - 모든 html 요소는 node의 메서드를 사용할 수 있고,
         EventTarget의 이벤트 속성들을 이용할 수 있다.
         - DOM객체의 속성 및 메서드들
         1) firstChilde, lastChild, childNodes ...
         2) contains(..), appendChild(), removeChild()...
    */

    function test12(){
        // <h2>안녕하세요</h2>

        // 동적으로 요소를 추가하는 방법
        // 1. innerHTML
        //document.querySelector(".result").innerHTML = "<h2>안녕하세요</h2>";

        // 2. createElement - document에서 제공하는 요소를 생성하는 메서드
        var h2 = document.createElement("h2"); //<h2></h2>
        // 생성된 태그에 문자열 추가하기
        var textNode = document.createTextNode("안녕하세요");

        // 두 노드를 연결
        h2.appendChild(textNode); // <h2>안녕하세요</h2>

        // 메모리에 생성된 노드를 실제 브라우저에 출력하기 위해선,
        // DOM내부의 요소에 현재 객체를 추가해줘야 한다.
        document.querySelector(".result")
            .appendChild(h2);
    }

    function test13(){
        // 동적으로 이미지 생성
        var img = document.createElement("img"); // <img>
        img.src = '../resources/image/bono.jpg'; // 로컬 디렉토리
        img.style = "width:200px;"

        document.querySelector(".img-wrapper")
        .appned(img);
    }

    function deleteNode(node){
        node.remove();
    }
    
  </script>
</body>
</html>